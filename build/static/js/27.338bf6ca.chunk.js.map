{"version":3,"sources":["pages/Exercise/Exercise.tsx","pages/Exercise/index.ts","components/Pagination/Pagination.tsx","components/Pagination/index.ts","containers/ExercisePackage/ExercisePackage.enums.ts","containers/ExercisePackage/ExercisePackage.tsx","containers/ExercisePackage/index.ts"],"names":["Exercise","dispatch","useDispatch","useState","page","DEFAULT_PAGE","pageSize","DEFAULT_PAGE_SIZE","getPackExercisesParamsRequest","setGetPackExercisesParamsRequest","getPackExercisesLoading","useSelector","state","loadingReducer","EPackExerciseControllerAction","GET_PACK_EXERCISES","packExercisesState","packExerciseReducer","packExercises","getPackExercisesData","useCallback","getPackExercisesAction","request","useEffect","className","PageLoading","HeaderSkew","title","ExercisePackage","type","ETypeExercisePackage","EXERCISE","dataSource","paginate","total","onPageChange","Pagination","onChange","classNames","current","showQuickJumper","showSizeChanger","hideOnSinglePage","showLessItems","owner","isPackExercisePage","isPackPtOnlinePage","PT_ONLINE","authState","authReducer","user","buyPackExerciseLoading","BUY_PACK_EXERCISE","buyPackPtOnlineLoading","EPackPtOnlineControllerAction","BUY_PACK_PT_ONLINE","mainTitle","loading","visible","confirmExercisePackageModalState","setConfirmExercisePackageModalState","paymentModalState","setPaymentModalState","failedPaymentModalState","setFailedPaymentModalState","isEmpty","length","handleCloseConfirmExercisePackageModal","handleCloseFailedPaymentModal","handleBuyPackExerciseSuccess","handleBuyPackExerciseFailed","handleSubmit","EmptyBox","map","item","ExercisePackageBox","image","name","description","onBuy","data","onClickDetail","navigate","LayoutPaths","Admin","Paths","ExerciseDetail","id","ExerciseOnlineDetail","Modal","confirmButton","onClick","buyPackExerciseAction","packExerciseId","buyPackPtOnlineAction","cancelButton","disabled","onClose","style","marginBottom","formatMoneyVND","amount","price","showSuffix","Profile","Wallet","money"],"mappings":"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","file":"static/js/27.338bf6ca.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport HeaderSkew from '@/components/HeaderSkew';\nimport ExercisePackage from '@/containers/ExercisePackage';\nimport { TParamsGetPackExercises } from '@/services/api/pack-exercise-controller/types';\nimport { getPackExercisesAction } from '@/redux/actions';\nimport { DEFAULT_PAGE, DEFAULT_PAGE_SIZE } from '@/common/constants';\nimport { TRootState } from '@/redux/reducers';\nimport { EPackExerciseControllerAction } from '@/redux/actions/pack-exercise-controller/constants';\nimport PageLoading from '@/components/PageLoading';\n\nimport './Exercise.scss';\nimport { ETypeExercisePackage } from '@/containers/ExercisePackage/ExercisePackage.enums';\n\nconst Exercise: React.FC = () => {\n  const dispatch = useDispatch();\n  const [getPackExercisesParamsRequest, setGetPackExercisesParamsRequest] = useState<TParamsGetPackExercises>({\n    page: DEFAULT_PAGE,\n    pageSize: DEFAULT_PAGE_SIZE,\n  });\n\n  const getPackExercisesLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackExerciseControllerAction.GET_PACK_EXERCISES],\n  );\n\n  const packExercisesState = useSelector((state: TRootState) => state.packExerciseReducer.packExercises);\n\n  const handlePageChange = (page: number, pageSize?: number): void => {\n    setGetPackExercisesParamsRequest({\n      ...getPackExercisesParamsRequest,\n      page,\n      pageSize: pageSize || getPackExercisesParamsRequest.pageSize,\n    });\n  };\n\n  const getPackExercisesData = useCallback(() => {\n    dispatch(getPackExercisesAction.request(getPackExercisesParamsRequest));\n  }, [dispatch, getPackExercisesParamsRequest]);\n\n  useEffect(() => {\n    getPackExercisesData();\n  }, [getPackExercisesData]);\n\n  return (\n    <div className=\"Exercise style-container\">\n      {getPackExercisesLoading ? (\n        <PageLoading />\n      ) : (\n        <>\n          <HeaderSkew title=\"Gói tập\" />\n\n          <div className=\"Exercise-main\">\n            <ExercisePackage\n              type={ETypeExercisePackage.EXERCISE}\n              dataSource={packExercisesState}\n              paginate={{\n                page: getPackExercisesParamsRequest.page,\n                pageSize: getPackExercisesParamsRequest.pageSize,\n                total: 0,\n              }}\n              onPageChange={handlePageChange}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Exercise;\n","import Exercise from './Exercise';\n\nexport default Exercise;\n","import React from 'react';\nimport { Pagination as AntdPagination } from 'antd';\nimport classNames from 'classnames';\n\nimport { TPaginationProps } from '@/components/Pagination/Pagination.types';\n\nimport './Pagination.scss';\n\nconst Pagination: React.FC<TPaginationProps> = ({ page, pageSize, total = 0, className, onChange }) => {\n  return (\n    <div className={classNames('Pagination', className)}>\n      <AntdPagination\n        current={page}\n        pageSize={pageSize}\n        total={total}\n        showQuickJumper={false}\n        showSizeChanger={false}\n        hideOnSinglePage\n        showLessItems\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default Pagination;\n","import Pagination from './Pagination';\n\nexport * from './Pagination.types';\nexport default Pagination;\n","export enum ETypeExercisePackage {\n  EXERCISE = 'EXERCISE',\n  PT_ONLINE = 'PT_ONLINE',\n}\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\n\nimport ExercisePackageBox from '@/components/ExercisePackageBox';\nimport { TExercisePackageProps } from './ExercisePackage.types';\nimport Modal from '@/components/Modal';\nimport { LayoutPaths, Paths } from '@/pages/routers';\nimport EmptyBox from '@/components/EmptyBox';\nimport Pagination from '@/components/Pagination';\nimport { TPackExerciseResponse } from '@/services/api/pack-exercise-controller/types';\nimport { formatMoneyVND } from '@/utils/functions';\nimport { TRootState } from '@/redux/reducers';\nimport { buyPackExerciseAction, buyPackPtOnlineAction } from '@/redux/actions';\nimport { EPackExerciseControllerAction } from '@/redux/actions/pack-exercise-controller/constants';\nimport { EPackPtOnlineControllerAction } from '@/redux/actions/pack-pt-online-controller/constants';\n\nimport './ExercisePackage.scss';\nimport { ETypeExercisePackage } from '@/containers/ExercisePackage/ExercisePackage.enums';\n\nconst ExercisePackage: React.FC<TExercisePackageProps> = ({\n  type,\n  owner,\n  title,\n  paginate,\n  dataSource = [],\n  onPageChange,\n}) => {\n  const dispatch = useDispatch();\n  const isPackExercisePage = type === ETypeExercisePackage.EXERCISE;\n  const isPackPtOnlinePage = type === ETypeExercisePackage.PT_ONLINE;\n\n  const authState = useSelector((state: TRootState) => state.authReducer.user);\n  const buyPackExerciseLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackExerciseControllerAction.BUY_PACK_EXERCISE],\n  );\n  const buyPackPtOnlineLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackPtOnlineControllerAction.BUY_PACK_PT_ONLINE],\n  );\n\n  const mainTitle = isPackExercisePage ? 'tập' : 'Pt Online';\n\n  const loading = buyPackExerciseLoading || buyPackPtOnlineLoading;\n\n  const [confirmExercisePackageModalState, setConfirmExercisePackageModalState] = useState<{\n    visible: boolean;\n    data?: any;\n  }>({\n    visible: false,\n  });\n\n  const [paymentModalState, setPaymentModalState] = useState<{\n    visible: boolean;\n  }>({\n    visible: false,\n  });\n\n  const [failedPaymentModalState, setFailedPaymentModalState] = useState<{\n    visible: boolean;\n  }>({\n    visible: false,\n  });\n\n  const isEmpty = !dataSource || dataSource.length === 0;\n\n  const handleOpenConfirmExercisePackageModal = (data: TPackExerciseResponse): void => {\n    setConfirmExercisePackageModalState({\n      visible: true,\n      data,\n    });\n  };\n\n  const handleCloseConfirmExercisePackageModal = (): void => {\n    setConfirmExercisePackageModalState({\n      visible: false,\n    });\n  };\n\n  const handleOpenPaymentModal = (): void => {\n    setPaymentModalState({\n      visible: true,\n    });\n  };\n\n  const handleClosePaymentModal = (): void => {\n    setPaymentModalState({\n      visible: false,\n    });\n  };\n\n  const handleOpenFailedPaymentModal = (): void => {\n    setFailedPaymentModalState({ visible: true });\n  };\n  const handleCloseFailedPaymentModal = (): void => {\n    setFailedPaymentModalState({ visible: false });\n  };\n  const handleSubmitFailedPaymentModal = (): void => {\n    handleCloseFailedPaymentModal();\n    navigate(`${LayoutPaths.Profile}${Paths.Wallet}`);\n  };\n\n  const handleConfirmExercisePackageModalSubmit = (): void => {\n    if (confirmExercisePackageModalState.data) {\n      if (isPackExercisePage) {\n        dispatch(\n          buyPackExerciseAction.request(\n            { packExerciseId: confirmExercisePackageModalState.data.id },\n            handleBuyPackExerciseSuccess,\n            handleBuyPackExerciseFailed,\n          ),\n        );\n      }\n\n      if (isPackPtOnlinePage) {\n        dispatch(\n          buyPackPtOnlineAction.request(\n            confirmExercisePackageModalState.data.id,\n            handleBuyPackExerciseSuccess,\n            handleBuyPackExerciseFailed,\n          ),\n        );\n      }\n    }\n  };\n\n  const handleBuyPackExerciseSuccess = (): void => {\n    handleCloseConfirmExercisePackageModal();\n    handleOpenPaymentModal();\n  };\n  const handleBuyPackExerciseFailed = (): void => {\n    handleCloseConfirmExercisePackageModal();\n    handleOpenFailedPaymentModal();\n  };\n\n  const handleSubmit = (): void => {\n    handleClosePaymentModal();\n  };\n\n  const handleNavigateExercisePackageDetail = (data: TPackExerciseResponse): void => {\n    if (isPackExercisePage) navigate(`${LayoutPaths.Admin}${Paths.ExerciseDetail(data.id)}`);\n    if (isPackPtOnlinePage) navigate(`${LayoutPaths.Admin}${Paths.ExerciseOnlineDetail(data.id)}`);\n  };\n\n  return (\n    <div className=\"ExercisePackage\">\n      <div className=\"ExercisePackage-title\">{title}</div>\n      {isEmpty ? (\n        <EmptyBox title={`Bạn chưa mua gói ${mainTitle} nào`} />\n      ) : (\n        <>\n          <div className=\"ExercisePackage-main flex flex-wrap justify-between\">\n            {dataSource.map((item) => (\n              <ExercisePackageBox\n                key={item.id}\n                image={item.image}\n                owner={owner}\n                title={item.title || item.name}\n                description={item.description}\n                onBuy={(): void => handleOpenConfirmExercisePackageModal(item)}\n                onClickDetail={(): void => handleNavigateExercisePackageDetail(item)}\n              />\n            ))}\n          </div>\n\n          <div className=\"ExercisePackage-pagination flex justify-center\">\n            <Pagination {...paginate} onChange={onPageChange} />\n          </div>\n        </>\n      )}\n\n      <Modal\n        {...confirmExercisePackageModalState}\n        confirmButton={{\n          title: 'Thanh toán',\n          onClick: handleConfirmExercisePackageModalSubmit,\n          loading,\n        }}\n        cancelButton={{\n          title: 'Huỷ bỏ',\n          onClick: handleCloseConfirmExercisePackageModal,\n          disabled: loading,\n        }}\n        onClose={handleCloseConfirmExercisePackageModal}\n      >\n        <div className=\"Modal-body-title\" style={{ marginBottom: '1rem' }}>\n          Xác nhận thanh toán\n        </div>\n        <div className=\"Modal-body-subtitle\" style={{ marginBottom: '.5rem' }}>\n          {confirmExercisePackageModalState.data?.title || confirmExercisePackageModalState.data?.name}:{' '}\n          <strong>\n            {formatMoneyVND({ amount: confirmExercisePackageModalState.data?.price || 0, showSuffix: true })}\n          </strong>\n        </div>\n        <div className=\"Modal-body-link\">Thanh toán qua ví của tôi</div>\n      </Modal>\n\n      <Modal {...paymentModalState} confirmButton={{ title: 'Đồng ý', onClick: handleSubmit }} onClose={handleSubmit}>\n        <div className=\"Modal-body-title\" style={{ marginBottom: '1.5rem' }}>\n          Thanh toán thành công\n        </div>\n        <div className=\"Modal-body-description\">Bạn đã mua gói {mainTitle} thành công</div>\n      </Modal>\n\n      <Modal\n        {...failedPaymentModalState}\n        onClose={handleCloseFailedPaymentModal}\n        confirmButton={{ title: 'Nạp thêm', onClick: handleSubmitFailedPaymentModal }}\n        cancelButton={{ title: 'Huỷ bỏ', onClick: handleCloseFailedPaymentModal }}\n      >\n        <div className=\"Modal-body-subtitle\" style={{ marginBottom: '1.5rem' }}>\n          Số dư của bạn: <strong>{formatMoneyVND({ amount: authState?.money || 0, showSuffix: true })}</strong>\n        </div>\n        <div className=\"Modal-body-description\">\n          Số dư ví của bạn không đủ để thanh toán gói {mainTitle}. Xin vui lòng nạp thêm!\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default ExercisePackage;\n","import ExercisePackage from './ExercisePackage';\n\nexport default ExercisePackage;\n"],"sourceRoot":""}
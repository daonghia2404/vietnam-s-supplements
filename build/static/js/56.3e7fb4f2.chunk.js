(this["webpackJsonpvietnam-supplements"]=this["webpackJsonpvietnam-supplements"]||[]).push([[56],{382:function(e,t,c){"use strict";c.r(t);var i=c(14),n=c(4),a=c(10),r=c(0),s=c(38),d=c(30),l=c(9),o=c.n(l),u=c(388),j=c(393),b=c(414),v=c(92),O=c(17),h=c(50),m=c(55),f=c(129),x=c(395),C=c(8),p=c(59),g=c(47),N=c(11),w=c(400),y=c(130),E=c(440),S=c(426),R=c(75),k=c(53),T=c(121),P=(c(526),c(1)),q=function(){var e,t,c=Object(s.b)(),l=h.a.getAccessToken(),q=u.a.useForm(),A=Object(a.a)(q,1)[0],I=Object(r.useState)([]),M=Object(a.a)(I,2),F=M[0],V=M[1],z=Object(s.c)((function(e){return e.authReducer.user})),_=Object(s.c)((function(e){return e.addressReducer})),B=Object(s.c)((function(e){var t;return null===(t=e.cartReducer.cart)||void 0===t?void 0:t.cart})),G=Object(s.c)((function(e){return e.uiReducer.cartsStorage}))||[],D=l?B:G,J=Object(s.c)((function(e){return e.loadingReducer[m.a.GET_CART]})),L=Object(s.c)((function(e){return e.loadingReducer[m.a.PATCH_CART]})),U=Object(s.c)((function(e){return e.loadingReducer[m.a.DELETE_CART]})),H=Object(s.c)((function(e){return e.loadingReducer[k.a.CREATE_ORDER]})),W=0===(null===D||void 0===D?void 0:D.length),X=Object(s.c)((function(e){var t;return null===(t=e.voucherReducer.vouchers)||void 0===t?void 0:t.total})),Y=Object(r.useState)({page:R.a,pageSize:R.b}),K=Object(a.a)(Y,2),Q=K[0],Z=K[1],$=Object(r.useState)([]),ee=Object(a.a)($,2),te=ee[0],ce=ee[1],ie=function(e){"not enough money"===e?Object(p.l)(g.d.ERROR,"B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 th\u1ef1c hi\u1ec7n"):(Object(p.l)(g.d.SUCCESS,"T\u1ea1o \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng"),ae(),Object(d.e)("".concat(C.b.Profile).concat(C.d.Cart)))},ne=function(){return F.map((function(e){return e.price})).reduce((function(e,t){return e+Number(t)}),0)},ae=Object(r.useCallback)((function(){l&&c(N.u.request())}),[l,c]),re=Object(r.useCallback)((function(){l&&c(N.Y.request(Q,(function(){var e=Q.page===R.a,t=[];ce(e?t:[].concat(Object(i.a)(te),t))})))}),[l,Q,c]),se=Object(r.useCallback)((function(){c(N.r.request({districtCode:null,cityCode:null}))}),[c]),de=Object(r.useCallback)((function(){null!==z&&void 0!==z&&z.city&&c(N.r.request({cityCode:null===z||void 0===z?void 0:z.city,districtCode:null}))}),[z,c]);return Object(r.useEffect)((function(){de()}),[de]),Object(r.useEffect)((function(){se()}),[se]),Object(r.useEffect)((function(){ae()}),[ae]),Object(r.useEffect)((function(){re()}),[re]),Object(r.useEffect)((function(){V(D||[])}),[D]),Object(r.useEffect)((function(){Object(p.j)()}),[]),Object(r.useEffect)((function(){A.setFieldsValue({typePayment:null===S.a||void 0===S.a?void 0:S.a[0]})}),[A]),Object(P.jsxs)("div",{className:"Carts",children:[Object(P.jsx)(j.a,{title:"Gi\u1ecf h\xe0ng"}),J?Object(P.jsx)(f.a,{}):Object(P.jsx)(P.Fragment,{children:W?Object(P.jsx)(x.a,{title:"Ch\u01b0a c\xf3 s\u1ea3n ph\u1ea9m n\xe0o trong gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n",buttonProps:{title:"Ti\u1ebfp t\u1ee5c mua s\u1eafm",onClick:function(){Object(d.e)(C.d.Categorys)}}}):Object(P.jsxs)("div",{className:"Carts-wrapper flex justify-between flex-wrap",children:[Object(P.jsx)("div",{className:"Carts-wrapper-item",children:Object(P.jsx)("div",{className:"Carts-orders",children:null===D||void 0===D?void 0:D.map((function(e){var t,i,n,a,r,s=(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.costPrice)===(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.price);return Object(P.jsxs)("div",{className:"Carts-orders-item flex items-start justify-between",children:[Object(P.jsx)("div",{className:o()("Carts-orders-item-remove",{loading:U}),onClick:function(){return function(e){if(l)U||c(N.p.request(e.id,(function(){Object(p.l)(g.d.SUCCESS,"X\xf3a s\u1ea3n ph\u1ea9m kh\u1ecfi gi\u1ecf h\xe0ng th\xe0nh c\xf4ng"),ae()})));else{var t=Object(T.d)(G,e.id);c(N.lb.setCartsStorage(t))}}(e)},children:Object(P.jsx)(O.c,{name:O.b.Close})}),Object(P.jsx)("div",{className:"Carts-orders-item-image",children:Object(P.jsx)("img",{src:null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.image,onError:p.g,alt:""})}),Object(P.jsxs)("div",{className:"Carts-orders-item-info",children:[Object(P.jsx)("div",{className:"Carts-orders-item-title",children:e.product.name}),e.dateStartEat&&e.dateEndEat&&Object(P.jsxs)("div",{className:"Carts-orders-item-date",children:["T\u1eeb ",Object(p.b)(e.dateStartEat,g.a.COMMON)," - \u0111\u1ebfn"," ",Object(p.b)(e.dateEndEat,g.a.COMMON)]}),Object(P.jsxs)("div",{className:"Carts-orders-item-price",children:[Object(p.d)({amount:e.product.price,showSuffix:!0})," ",Boolean(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.costPrice)&&!s&&Object(P.jsx)("del",{children:Object(p.d)({amount:(null===e||void 0===e||null===(r=e.product)||void 0===r?void 0:r.costPrice)||0,showSuffix:!0})})]}),Object(P.jsxs)("div",{className:"Carts-orders-item-amount flex justify-between",children:["S\u1ed1 l\u01b0\u1ee3ng:",Object(P.jsx)(b.a,{value:e.amount,disabled:L,onChange:function(t){return function(e,t){if(l){if(!L){var i={amount:e};c(N.eb.request(t.id,i,ae))}}else{var n=Object(T.c)(G,t.id,e);c(N.lb.setCartsStorage(n))}}(t,e)}})]})]})]},e.id)}))})}),Object(P.jsx)("div",{className:"Carts-wrapper-item",children:Object(P.jsx)("div",{className:"Carts-card",children:Object(P.jsxs)(u.a,{form:A,onFinish:function(e){if(l){var t,i={typePayment:null===e||void 0===e||null===(t=e.typePayment)||void 0===t?void 0:t.value,referCode:(null===e||void 0===e?void 0:e.referCode)||"",idCardBackCard:(null===z||void 0===z?void 0:z.backIdCard)||"",idCardFontCard:(null===z||void 0===z?void 0:z.frontIdCard)||"",address:(null===z||void 0===z?void 0:z.address)||"",phoneRevicer:(null===z||void 0===z?void 0:z.phone)||"",nameReceiver:(null===z||void 0===z?void 0:z.fullName)||"",district:(null===z||void 0===z?void 0:z.district)||"",city:(null===z||void 0===z?void 0:z.city)||""};c(N.k.request(i,ie))}else Object(p.l)(g.d.WARNING,"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ti\u1ebfp t\u1ee5c th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng")},children:[Object(P.jsx)("div",{className:"Carts-card-title",children:"Voucher"}),Object(P.jsx)(u.a.Item,{name:"voucher",children:Object(P.jsx)(w.a,{placeholder:"Ch\u1ecdn Voucher",options:te,onLoadMore:function(){Z(Object(n.a)(Object(n.a)({},Q),{},{page:Q.page+1}))},paginate:{page:Q.page,pageSize:Q.pageSize,total:X||0},allowClear:!0})}),Object(P.jsx)("div",{className:"Carts-card-title",children:"\u0110\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n"}),Object(P.jsxs)("div",{className:"Carts-card-address",children:[Object(P.jsx)("h6",{children:"\u0110\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n"}),Object(P.jsx)("p",{children:null===z||void 0===z?void 0:z.phone}),Object(P.jsx)("p",{children:null===z||void 0===z?void 0:z.address}),Object(P.jsx)("p",{children:null===(e=_.district.find((function(e){return e.value===(null===z||void 0===z?void 0:z.district)})))||void 0===e?void 0:e.label}),Object(P.jsx)("p",{children:null===(t=_.city.find((function(e){return e.value===(null===z||void 0===z?void 0:z.city)})))||void 0===t?void 0:t.label})]}),Object(P.jsx)("div",{className:"Carts-card-title",children:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"}),Object(P.jsx)(u.a.Item,{name:"typePayment",rules:[p.m.required()],children:Object(P.jsx)(E.a,{options:S.a})}),Object(P.jsx)("div",{className:"Carts-card-title",children:"M\xe3 gi\u1edbi thi\u1ec7u"}),Object(P.jsx)(u.a.Item,{name:"referCode",children:Object(P.jsx)(y.a,{placeholder:"Nh\u1eadp m\xe3 gi\u1edbi thi\u1ec7u"})}),Object(P.jsxs)("div",{className:"Carts-row-summary",children:[Object(P.jsxs)("div",{className:"Carts-row flex justify-between",children:[Object(P.jsxs)("div",{className:"Carts-row-text",children:[F.length," s\u1ea3n ph\u1ea9m"]}),Object(P.jsx)("div",{className:"Carts-row-text",children:Object(p.d)({amount:ne(),showSuffix:!0})})]}),Object(P.jsxs)("div",{className:"Carts-row flex justify-between",children:[Object(P.jsx)("div",{className:"Carts-row-text",children:"Voucher"}),Object(P.jsx)("div",{className:"Carts-row-text",children:"0 \u0111"})]}),Object(P.jsxs)("div",{className:"Carts-row flex justify-between",children:[Object(P.jsx)("div",{className:"Carts-row-text",children:"T\u1ed5ng gi\xe1 ti\u1ec1n"}),Object(P.jsx)("div",{className:"Carts-row-text",children:Object(P.jsx)("strong",{children:Object(p.d)({amount:ne(),showSuffix:!0})})})]}),Object(P.jsx)("div",{className:"Carts-row-submit",children:Object(P.jsx)(v.a,{type:"primary",title:"\u0110\u1eb7t h\xe0ng",size:"large",htmlType:"submit",loading:H})})]})]})})})]})})]})};t.default=q},526:function(e,t,c){}}]);
//# sourceMappingURL=56.3e7fb4f2.chunk.js.map
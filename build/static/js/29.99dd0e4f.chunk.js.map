{"version":3,"sources":["pages/ExerciseOnline/ExerciseOnline.tsx","pages/ExerciseOnline/index.ts","components/Pagination/Pagination.tsx","components/Pagination/index.ts","containers/ExercisePackage/ExercisePackage.enums.ts","containers/ExercisePackage/ExercisePackage.tsx","containers/ExercisePackage/index.ts"],"names":["ExerciseOnline","dispatch","useDispatch","useState","page","DEFAULT_PAGE","pageSize","DEFAULT_PAGE_SIZE","getPackPtOnlinesParamsRequest","setGetPackPtOnlinesParamsRequest","getPackPtOnlinesLoading","useSelector","state","loadingReducer","EPackPtOnlineControllerAction","GET_PACK_PT_ONLINES","packPtOnlinesState","packPtOnlineReducer","packPtOnlines","getPackPtOnlinesData","useCallback","getPackPtOnlinesAction","request","useEffect","className","PageLoading","HeaderSkew","title","ExercisePackage","type","ETypeExercisePackage","PT_ONLINE","dataSource","records","paginate","total","onPageChange","Pagination","onChange","classNames","current","showQuickJumper","showSizeChanger","hideOnSinglePage","showLessItems","owner","isPackExercisePage","EXERCISE","isPackPtOnlinePage","authState","authReducer","user","buyPackExerciseLoading","EPackExerciseControllerAction","BUY_PACK_EXERCISE","buyPackPtOnlineLoading","BUY_PACK_PT_ONLINE","mainTitle","loading","visible","confirmExercisePackageModalState","setConfirmExercisePackageModalState","paymentModalState","setPaymentModalState","failedPaymentModalState","setFailedPaymentModalState","isEmpty","length","handleCloseConfirmExercisePackageModal","handleCloseFailedPaymentModal","handleBuyPackExerciseSuccess","handleBuyPackExerciseFailed","handleSubmit","EmptyBox","map","item","ExercisePackageBox","image","name","description","onBuy","data","onClickDetail","navigate","LayoutPaths","Admin","Paths","ExerciseDetail","id","ExerciseOnlineDetail","Modal","confirmButton","onClick","buyPackExerciseAction","packExerciseId","buyPackPtOnlineAction","cancelButton","disabled","onClose","style","marginBottom","formatMoneyVND","amount","price","showSuffix","Profile","Wallet","money"],"mappings":"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","file":"static/js/29.99dd0e4f.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport HeaderSkew from '@/components/HeaderSkew';\nimport ExercisePackage from '@/containers/ExercisePackage';\nimport { TParamsGetPackPtOnlines } from '@/services/api/pack-pt-online-controller/types';\nimport { getPackPtOnlinesAction } from '@/redux/actions';\nimport { DEFAULT_PAGE, DEFAULT_PAGE_SIZE } from '@/common/constants';\nimport { TRootState } from '@/redux/reducers';\nimport { EPackPtOnlineControllerAction } from '@/redux/actions/pack-pt-online-controller/constants';\nimport PageLoading from '@/components/PageLoading';\nimport { ETypeExercisePackage } from '@/containers/ExercisePackage/ExercisePackage.enums';\n\nimport './ExerciseOnline.scss';\n\nconst ExerciseOnline: React.FC = () => {\n  const dispatch = useDispatch();\n  const [getPackPtOnlinesParamsRequest, setGetPackPtOnlinesParamsRequest] = useState<TParamsGetPackPtOnlines>({\n    page: DEFAULT_PAGE,\n    pageSize: DEFAULT_PAGE_SIZE,\n  });\n\n  const getPackPtOnlinesLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackPtOnlineControllerAction.GET_PACK_PT_ONLINES],\n  );\n\n  const packPtOnlinesState = useSelector((state: TRootState) => state.packPtOnlineReducer.packPtOnlines);\n\n  const handlePageChange = (page: number, pageSize?: number): void => {\n    setGetPackPtOnlinesParamsRequest({\n      ...getPackPtOnlinesParamsRequest,\n      page,\n      pageSize: pageSize || getPackPtOnlinesParamsRequest.pageSize,\n    });\n  };\n\n  const getPackPtOnlinesData = useCallback(() => {\n    dispatch(getPackPtOnlinesAction.request(getPackPtOnlinesParamsRequest));\n  }, [dispatch, getPackPtOnlinesParamsRequest]);\n\n  useEffect(() => {\n    getPackPtOnlinesData();\n  }, [getPackPtOnlinesData]);\n\n  return (\n    <div className=\"ExerciseOnline style-container\">\n      {getPackPtOnlinesLoading ? (\n        <PageLoading />\n      ) : (\n        <>\n          <HeaderSkew title=\"Gói PT Online\" />\n\n          <div className=\"ExerciseOnline-main\">\n            <ExercisePackage\n              type={ETypeExercisePackage.PT_ONLINE}\n              dataSource={packPtOnlinesState?.records}\n              paginate={{\n                page: getPackPtOnlinesParamsRequest.page,\n                pageSize: getPackPtOnlinesParamsRequest.pageSize,\n                total: packPtOnlinesState?.total || 0,\n              }}\n              onPageChange={handlePageChange}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ExerciseOnline;\n","import ExerciseOnline from './ExerciseOnline';\n\nexport default ExerciseOnline;\n","import React from 'react';\nimport { Pagination as AntdPagination } from 'antd';\nimport classNames from 'classnames';\n\nimport { TPaginationProps } from '@/components/Pagination/Pagination.types';\n\nimport './Pagination.scss';\n\nconst Pagination: React.FC<TPaginationProps> = ({ page, pageSize, total = 0, className, onChange }) => {\n  return (\n    <div className={classNames('Pagination', className)}>\n      <AntdPagination\n        current={page}\n        pageSize={pageSize}\n        total={total}\n        showQuickJumper={false}\n        showSizeChanger={false}\n        hideOnSinglePage\n        showLessItems\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default Pagination;\n","import Pagination from './Pagination';\n\nexport * from './Pagination.types';\nexport default Pagination;\n","export enum ETypeExercisePackage {\n  EXERCISE = 'EXERCISE',\n  PT_ONLINE = 'PT_ONLINE',\n}\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\n\nimport ExercisePackageBox from '@/components/ExercisePackageBox';\nimport { TExercisePackageProps } from './ExercisePackage.types';\nimport Modal from '@/components/Modal';\nimport { LayoutPaths, Paths } from '@/pages/routers';\nimport EmptyBox from '@/components/EmptyBox';\nimport Pagination from '@/components/Pagination';\nimport { TPackExerciseResponse } from '@/services/api/pack-exercise-controller/types';\nimport { formatMoneyVND } from '@/utils/functions';\nimport { TRootState } from '@/redux/reducers';\nimport { buyPackExerciseAction, buyPackPtOnlineAction } from '@/redux/actions';\nimport { EPackExerciseControllerAction } from '@/redux/actions/pack-exercise-controller/constants';\nimport { EPackPtOnlineControllerAction } from '@/redux/actions/pack-pt-online-controller/constants';\n\nimport './ExercisePackage.scss';\nimport { ETypeExercisePackage } from '@/containers/ExercisePackage/ExercisePackage.enums';\n\nconst ExercisePackage: React.FC<TExercisePackageProps> = ({\n  type,\n  owner,\n  title,\n  paginate,\n  dataSource = [],\n  onPageChange,\n}) => {\n  const dispatch = useDispatch();\n  const isPackExercisePage = type === ETypeExercisePackage.EXERCISE;\n  const isPackPtOnlinePage = type === ETypeExercisePackage.PT_ONLINE;\n\n  const authState = useSelector((state: TRootState) => state.authReducer.user);\n  const buyPackExerciseLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackExerciseControllerAction.BUY_PACK_EXERCISE],\n  );\n  const buyPackPtOnlineLoading = useSelector(\n    (state: TRootState) => state.loadingReducer[EPackPtOnlineControllerAction.BUY_PACK_PT_ONLINE],\n  );\n\n  const mainTitle = isPackExercisePage ? 'tập' : 'Pt Online';\n\n  const loading = buyPackExerciseLoading || buyPackPtOnlineLoading;\n\n  const [confirmExercisePackageModalState, setConfirmExercisePackageModalState] = useState<{\n    visible: boolean;\n    data?: any;\n  }>({\n    visible: false,\n  });\n\n  const [paymentModalState, setPaymentModalState] = useState<{\n    visible: boolean;\n  }>({\n    visible: false,\n  });\n\n  const [failedPaymentModalState, setFailedPaymentModalState] = useState<{\n    visible: boolean;\n  }>({\n    visible: false,\n  });\n\n  const isEmpty = !dataSource || dataSource.length === 0;\n\n  const handleOpenConfirmExercisePackageModal = (data: TPackExerciseResponse): void => {\n    setConfirmExercisePackageModalState({\n      visible: true,\n      data,\n    });\n  };\n\n  const handleCloseConfirmExercisePackageModal = (): void => {\n    setConfirmExercisePackageModalState({\n      visible: false,\n    });\n  };\n\n  const handleOpenPaymentModal = (): void => {\n    setPaymentModalState({\n      visible: true,\n    });\n  };\n\n  const handleClosePaymentModal = (): void => {\n    setPaymentModalState({\n      visible: false,\n    });\n  };\n\n  const handleOpenFailedPaymentModal = (): void => {\n    setFailedPaymentModalState({ visible: true });\n  };\n  const handleCloseFailedPaymentModal = (): void => {\n    setFailedPaymentModalState({ visible: false });\n  };\n  const handleSubmitFailedPaymentModal = (): void => {\n    handleCloseFailedPaymentModal();\n    navigate(`${LayoutPaths.Profile}${Paths.Wallet}`);\n  };\n\n  const handleConfirmExercisePackageModalSubmit = (): void => {\n    if (confirmExercisePackageModalState.data) {\n      if (isPackExercisePage) {\n        dispatch(\n          buyPackExerciseAction.request(\n            { packExerciseId: confirmExercisePackageModalState.data.id },\n            handleBuyPackExerciseSuccess,\n            handleBuyPackExerciseFailed,\n          ),\n        );\n      }\n\n      if (isPackPtOnlinePage) {\n        dispatch(\n          buyPackPtOnlineAction.request(\n            confirmExercisePackageModalState.data.id,\n            handleBuyPackExerciseSuccess,\n            handleBuyPackExerciseFailed,\n          ),\n        );\n      }\n    }\n  };\n\n  const handleBuyPackExerciseSuccess = (): void => {\n    handleCloseConfirmExercisePackageModal();\n    handleOpenPaymentModal();\n  };\n  const handleBuyPackExerciseFailed = (): void => {\n    handleCloseConfirmExercisePackageModal();\n    handleOpenFailedPaymentModal();\n  };\n\n  const handleSubmit = (): void => {\n    handleClosePaymentModal();\n  };\n\n  const handleNavigateExercisePackageDetail = (data: TPackExerciseResponse): void => {\n    if (isPackExercisePage) navigate(`${LayoutPaths.Admin}${Paths.ExerciseDetail(data.id)}`);\n    if (isPackPtOnlinePage) navigate(`${LayoutPaths.Admin}${Paths.ExerciseOnlineDetail(data.id)}`);\n  };\n\n  return (\n    <div className=\"ExercisePackage\">\n      <div className=\"ExercisePackage-title\">{title}</div>\n      {isEmpty ? (\n        <EmptyBox title={`Bạn chưa mua gói ${mainTitle} nào`} />\n      ) : (\n        <>\n          <div className=\"ExercisePackage-main flex flex-wrap justify-between\">\n            {dataSource.map((item) => (\n              <ExercisePackageBox\n                key={item.id}\n                image={item.image}\n                owner={owner}\n                title={item.title || item.name}\n                description={item.description}\n                onBuy={(): void => handleOpenConfirmExercisePackageModal(item)}\n                onClickDetail={(): void => handleNavigateExercisePackageDetail(item)}\n              />\n            ))}\n          </div>\n\n          <div className=\"ExercisePackage-pagination flex justify-center\">\n            <Pagination {...paginate} onChange={onPageChange} />\n          </div>\n        </>\n      )}\n\n      <Modal\n        {...confirmExercisePackageModalState}\n        confirmButton={{\n          title: 'Thanh toán',\n          onClick: handleConfirmExercisePackageModalSubmit,\n          loading,\n        }}\n        cancelButton={{\n          title: 'Huỷ bỏ',\n          onClick: handleCloseConfirmExercisePackageModal,\n          disabled: loading,\n        }}\n        onClose={handleCloseConfirmExercisePackageModal}\n      >\n        <div className=\"Modal-body-title\" style={{ marginBottom: '1rem' }}>\n          Xác nhận thanh toán\n        </div>\n        <div className=\"Modal-body-subtitle\" style={{ marginBottom: '.5rem' }}>\n          {confirmExercisePackageModalState.data?.title || confirmExercisePackageModalState.data?.name}:{' '}\n          <strong>\n            {formatMoneyVND({ amount: confirmExercisePackageModalState.data?.price || 0, showSuffix: true })}\n          </strong>\n        </div>\n        <div className=\"Modal-body-link\">Thanh toán qua ví của tôi</div>\n      </Modal>\n\n      <Modal {...paymentModalState} confirmButton={{ title: 'Đồng ý', onClick: handleSubmit }} onClose={handleSubmit}>\n        <div className=\"Modal-body-title\" style={{ marginBottom: '1.5rem' }}>\n          Thanh toán thành công\n        </div>\n        <div className=\"Modal-body-description\">Bạn đã mua gói {mainTitle} thành công</div>\n      </Modal>\n\n      <Modal\n        {...failedPaymentModalState}\n        onClose={handleCloseFailedPaymentModal}\n        confirmButton={{ title: 'Nạp thêm', onClick: handleSubmitFailedPaymentModal }}\n        cancelButton={{ title: 'Huỷ bỏ', onClick: handleCloseFailedPaymentModal }}\n      >\n        <div className=\"Modal-body-subtitle\" style={{ marginBottom: '1.5rem' }}>\n          Số dư của bạn: <strong>{formatMoneyVND({ amount: authState?.money || 0, showSuffix: true })}</strong>\n        </div>\n        <div className=\"Modal-body-description\">\n          Số dư ví của bạn không đủ để thanh toán gói {mainTitle}. Xin vui lòng nạp thêm!\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default ExercisePackage;\n","import ExercisePackage from './ExercisePackage';\n\nexport default ExercisePackage;\n"],"sourceRoot":""}